(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{195:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("该模块位于 "),a("a",{attrs:{href:"https://github.com/sailist/thexp/blob/master/thexp/frame/meter.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("thexp.frame.meter"),a("OutboundLink")],1),t._v("。"),a("code",[t._v("Meter")]),t._v(" 用于在尽可能的不干扰训练逻辑的同时记录变量（并用于日志输出）。")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("该节介绍的功能的全部示例位于 "),a("a",{attrs:{href:"https://github.com/sailist/thexp/blob/master/examples/2.meters.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("examples/2.meters.py"),a("OutboundLink")],1),t._v(" 中")])]),t._v(" "),t._m(1),t._v(" "),t._m(2),a("p",[t._v("输出")]),t._v(" "),t._m(3),a("p",[t._v("在训练的过程中，Meter 实例中的变量可以任意取出，不受影响。")]),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("Meter可以很方便的控制输出格式，目前基于需求，主要添加了百分比、浮点精度和整数这三种格式化方法，如下：")]),t._v(" "),t._m(5),a("p",[t._v("输出")]),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("在很多时候都需要对输出值取平均，使得观察到的结果比较稳定。这由 "),a("a",{attrs:{href:"https://github.com/sailist/thexp/blob/master/thexp/frame/meter.py#L172",target:"_blank",rel:"noopener noreferrer"}},[t._v("thexp.frame.meter.AvgMeter"),a("OutboundLink")],1),t._v(" 实现。")]),t._v(" "),t._m(9),t._v(" "),t._m(10),a("p",[t._v("输出")]),t._v(" "),t._m(11)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"变量记录：meter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变量记录：meter","aria-hidden":"true"}},[this._v("#")]),this._v(" 变量记录：Meter")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本使用","aria-hidden":"true"}},[this._v("#")]),this._v(" 基本使用")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Meter\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" torch\n\nm "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Meter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"2"')]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" torch"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rand"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c1 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" torch"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rand"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c2 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" torch"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rand"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c3 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" torch"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rand"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# 会只保留第一行")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("print")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("a: 1 | b: 2 | c: 0.8843 | c1: 0.8047 | c2: tensor([0.3105, 0.8244]) | c3: tensor([[0.6359, 0.1128, 0.1258, 0.4511],...\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"输出格式控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出格式控制","aria-hidden":"true"}},[this._v("#")]),this._v(" 输出格式控制")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Meter\nm "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Meter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.236")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3.236")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.23612312")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("percent"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a_"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("float")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c_"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("print")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("a: 23.60% | b: 3 | c: 0.24\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("m.a_ 与 'a'")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("meter")]),t._v(" 中，"),a("strong",[t._v("变量名+下划线实际等价于去掉了下划线的变量名对应的字符串")]),t._v("，也即 "),a("code",[t._v('m.a_ == "a"')]),t._v("，在上面的代码中，这两种形式等价，这种实现方式主要用于IDE的自动补全，在变量后添加一个下划线即可以表示该变量名自身。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"平均值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#平均值","aria-hidden":"true"}},[this._v("#")]),this._v(" 平均值")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("目前考虑到需求，"),s("strong",[this._v("平均值只计算标量浮点类型的值")]),this._v("，如果整数型值需要计算平均，请将其转换为浮点数。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('from thexp import Meter,AvgMeter\n\nam = AvgMeter()\nfor j in range(5):\n    for i in range(100):\n        m = Meter()\n        m.percent(m.c_)\n        m.a = 1\n        m.b = "2"\n        m.c = torch.rand(1)[0]\n\n        m.c1 = torch.rand(1)\n        m.c2 = torch.rand(2)\n        m.c3 = torch.rand(4, 4)\n        m.d = [4]\n        m.e = {5: "6"}\n        # print(m)\n        am.update(m)\n    print(am)\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("a: 1 | b: 2 | c: 2.73%(43.51%) | c1: 0.9707 | c2: [0.65452176 0.84101534] | c3: [[0.84045666 0.7536433  0.8916327  0.28940183]... | d: [4] | e: {5: '6'}\n...\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])}],!1,null,null,null);e.options.__file="3-meter.md";s.default=e.exports}}]);