(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{196:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("p",[t._v("该模块位于 "),n("a",{attrs:{href:"https://github.com/sailist/thexp/blob/master/thexp/frame/logger.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("thexp.frame.logger.Logger"),n("OutboundLink")],1),t._v("，专注于日志输出，可以配合"),n("code",[t._v("Meter")]),t._v("类，也可以单独使用，支持多种日志级别的输出，同时添加了在同一行多次输出的支持。")]),t._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("该节介绍的功能的全部示例位于 "),n("a",{attrs:{href:"https://github.com/sailist/thexp/blob/master/examples/3.logger.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("examples/3.logger.py"),n("OutboundLink")],1),t._v(" 中")])]),t._v(" "),t._m(1),t._v(" "),t._m(2),n("p",[t._v("输出")]),t._v(" "),t._m(3),n("p",[t._v("在显示屏中运行时你会看到中间一段循环会一直在同一行打印，超过一行的部份会被暂时截断。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),n("p",[t._v("运行下面的代码，观察输出")]),t._v(" "),t._m(9),n("p",[t._v("输出")]),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),n("p",[t._v("如果使用meter，则会变成：")]),t._v(" "),t._m(14),t._m(15)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"日志输出：logger"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志输出：logger","aria-hidden":"true"}},[this._v("#")]),this._v(" 日志输出：Logger")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本使用","aria-hidden":"true"}},[this._v("#")]),this._v(" 基本使用")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n"),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp "),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Logger"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Meter"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Params\nlogger "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Logger"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmeter "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Meter"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmeter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("3.13524635465")]),t._v("\nmeter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;"')]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("range")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("10")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    logger"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inline"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"inline examples"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("meter"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0.2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token number"}},[t._v("4")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("4")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("meter"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("range")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("10")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    logger"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("raw"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("inline"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token boolean"}},[t._v("True")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("append"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token boolean"}},[t._v("True")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0.2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("20-05-15 10:21:41 | inline examples | a: 3.1352 | b: long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;\n20-05-15 10:21:41 | 1 | 2 | 3 | {4: 4}\n20-05-15 10:21:41 | a: 3.1352 | b: long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;long text;\n0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | \n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("Logger设计时没有考虑到线程安全，但考虑到深度学习试验的日志输出作用，一般不存在线程安全问题。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"添加输出目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加输出目录","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加输出目录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可以添加任意多个输出目录，参数为文件夹位置，日志名称会根据日期时间自动命名，后缀为 "),s("code",[this._v(".log")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("logger"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_log_dir"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"./"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"noneitem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#noneitem","aria-hidden":"true"}},[this._v("#")]),this._v(" NoneItem")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp "),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Meter\nm "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Meter"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("print")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("k"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("NoneItem()\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("NontItem")]),t._v(" "),n("p",[t._v("任何原本不在meter中的变量在获取时不会报错，而是会返回一个 "),n("code",[t._v("NoneItem")]),t._v(" 类型，该类型具有以下的特性：")]),t._v(" "),n("ul",[n("li",[t._v("noneitem == None")]),t._v(" "),n("li",[t._v("noneitem + any = any")]),t._v(" "),n("li",[t._v("noneitem - any = -any")]),t._v(" "),n("li",[t._v("noneitem * any = 1*any")]),t._v(" "),n("li",[t._v("noneitem / any = 1/any")]),t._v(" "),n("li",[t._v("任何对象和 noneitem 比较大或者小均返回 True")]),t._v(" "),n("li",[t._v("int(noneitem) = 0, float(noneitem) = 0")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("该类位于 "),s("code",[this._v("thexp.base_classes.trickitems")]),this._v("，提供了一些奇技淫巧感兴趣可以看一下它的实现。该特性减少了某些情况下的代码量，比如说，可控的多段 loss 相加，如下面的代码：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("all_loss = 0\nif conditiona:\n    all_loss = all_loss + a_loss\nif conditionb:\n    all_loss = all_loss + a_loss\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("# all_loss = 0 # 可以不用写了\nif conditiona:\n    m.all_loss = m.all_loss + m.a_loss\nif conditionb:\n    m.all_loss = m.all_loss + m.a_loss\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("注意 noneitem 做运算需要放在前面，否则执行方法时调用的不是noneitem内重写的运算符。")])])}],!1,null,null,null);e.options.__file="4-logger.md";s.default=e.exports}}]);